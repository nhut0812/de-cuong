<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Äá» CÆ°Æ¡ng Ã”n Táº­p</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <div>
                    <h1>ğŸ“š Äá» CÆ°Æ¡ng Ã”n Táº­p</h1>
                    <p class="subtitle">Táº£i Ä‘á» cÆ°Æ¡ng Ã´n táº­p cÃ¡c mÃ´n há»c</p>
                </div>
                <a href="#" id="adminBtn" class="admin-btn" title="Trang quáº£n trá»‹">
                    ğŸ” Admin
                </a>
            </div>
        </header>

        <div class="search-box">
            <input type="text" id="searchInput" placeholder="ğŸ” TÃ¬m kiáº¿m mÃ´n há»c...">
        </div>

        <div class="filter-section">
            <div class="filter-label">Lá»c theo lá»›p:</div>
            <div class="filter-buttons">
                <button class="filter-btn active" data-grade="all">Táº¥t cáº£</button>
                <button class="filter-btn" data-grade="1">Lá»›p 1</button>
                <button class="filter-btn" data-grade="2">Lá»›p 2</button>
                <button class="filter-btn" data-grade="3">Lá»›p 3</button>
                <button class="filter-btn" data-grade="4">Lá»›p 4</button>
                <button class="filter-btn" data-grade="5">Lá»›p 5</button>
            </div>
        </div>

        <div id="stats" class="stats">
            <span>Tá»•ng sá»‘ Ä‘á» cÆ°Æ¡ng: <strong id="totalCount">0</strong></span>
        </div>

        <div id="outlinesList" class="outlines-grid">
            <!-- Danh sÃ¡ch Ä‘á» cÆ°Æ¡ng sáº½ Ä‘Æ°á»£c táº£i Ä‘á»™ng tá»« JavaScript -->
            <div class="loading">
                <div class="spinner"></div>
                <p>Äang táº£i Ä‘á» cÆ°Æ¡ng...</p>
            </div>
        </div>

        <footer>
            <p>Cáº­p nháº­t: <span id="lastUpdate"></span></p>
            <p class="note">ğŸ’¡ Nháº¥p vÃ o tÃªn mÃ´n há»c Ä‘á»ƒ táº£i Ä‘á» cÆ°Æ¡ng vá» mÃ¡y</p>
        </footer>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script src="js/firebase-config.js"></script>
    <script src="js/app.js?v=2.0"></script>
    <script>
        // Xá»­ lÃ½ nÃºt Admin - kiá»ƒm tra Ä‘Ã£ Ä‘Äƒng nháº­p chÆ°a
        document.addEventListener('DOMContentLoaded', function() {
            const adminBtn = document.getElementById('adminBtn');
            if (adminBtn) {
                adminBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Kiá»ƒm tra localStorage xem Ä‘Ã£ Ä‘Äƒng nháº­p chÆ°a
                    const sessionData = localStorage.getItem('admin_session');
                    
                    if (sessionData) {
                        try {
                            const session = JSON.parse(sessionData);
                            
                            // Kiá»ƒm tra thá»i gian háº¿t háº¡n
                            if (session.expires && Date.now() < session.expires && session.logged_in) {
                                // ÄÃ£ Ä‘Äƒng nháº­p vÃ  cÃ²n hiá»‡u lá»±c, chuyá»ƒn tháº³ng Ä‘áº¿n admin
                                window.location.href = 'admin.html';
                                return;
                            }
                        } catch (e) {
                            console.error('Lá»—i Ä‘á»c session:', e);
                        }
                    }
                    
                    // ChÆ°a Ä‘Äƒng nháº­p hoáº·c háº¿t háº¡n, chuyá»ƒn Ä‘áº¿n login
                    window.location.href = 'login.html';
                });
            }
        });
    </script>
</body>
</html>
